<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/04-platzi/01-js-desde-cero/css/style.css" />
    <title>Anatomía de una Funcion-Calcular Descuento</title>
  </head>
  <body>
    <section class="container">
      <h1 class="container__title">Calcular Descuento</h1>
      <form class="form" id="discountForm">
        <input
          type="number"
          class="form__input"
          id="price"
          placeholder="Ingresar precio" />
        <input
          type="number"
          class="form__input"
          id="discount"
          placeholder="Ingresar % descuento" />
        <button class="form__button" type="submit">Calcular</button>
        <div class="form__result" id="discountResult"></div>
      </form>
    </section>
    <script>
      document
        .getElementById("discountForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          // Obtener valores
          const price = parseFloat(document.getElementById("price").value);
          const discount = parseFloat(
            document.getElementById("discount").value
          );
          const resultDiv = document.getElementById("discountResult");

          resultDiv.className = "form__result"; // resetear clases

          // Validación básica
          if (
            isNaN(price) ||
            isNaN(discount) ||
            price <= 0 ||
            discount < 0 ||
            discount > 100
          ) {
            resultDiv.textContent =
              "❌ Ingrese valores válidos (descuento entre 0 y 100).";
            resultDiv.classList.add("result--error");
            return;
          }

          // Función de cálculo
          function calculateDiscountedPrice(price, discountPercentage) {
            return price - (price * discountPercentage) / 100;
          }

          const finalPrice = calculateDiscountedPrice(price, discount);
          resultDiv.textContent = `✅ El precio con descuento es: $${finalPrice.toFixed(
            2
          )}`;
          resultDiv.classList.add("result--success");
        });
    </script>
  </body>
</html>
